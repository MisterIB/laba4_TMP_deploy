{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useParams,useNavigate}from\"react-router-dom\";import axios from\"axios\";import'./MeasuringSystem.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const MeasuringDeviceSystem=()=>{const navigate=useNavigate();const{id}=useParams();const[mds,setMds]=useState('');const[isEditing,setIsEditing]=useState(false);useEffect(()=>{const fetchMDS=async()=>{try{const response=await axios.get(`http://217.71.129.139:5735/measuring_device/${id}`,{withCredentials:true,credentials:'include'});setMds(response.data);}catch(err){console.log(err);alert('Ошибка при получении данных');navigate('/profile');}};if(id){fetchMDS();}},[id]);const handleSave=async()=>{try{await axios.put(`http://217.71.129.139:5735/measuring_device/${id}`,mds,{withCredentials:true,credentials:'include'});setIsEditing(false);}catch(err){console.log(err);alert('Ошибка при сохранении');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"mds-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0421\\u0438\\u0441\\u0442\\u0435\\u043C\\u0430 \\u0438\\u0437\\u043C\\u0435\\u0440\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u044B\\u0445 \\u043F\\u0440\\u0438\\u0431\\u043E\\u0440\\u043E\\u0432\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mds-data\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041C\\u043E\\u0434\\u0435\\u043B\\u044C:\"}),isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:mds.model,onChange:e=>setMds({...mds,model:e.target.value})}):mds.model]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E \\u0442\\u043E\\u043F\\u043B\\u0438\\u0432\\u0430 (\\u043B):\"}),isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:mds.fuel_quantity,onChange:e=>setMds({...mds,fuel_quantity:e.target.value})}):mds.fuel_quantity]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0422\\u0435\\u043C\\u043F\\u0435\\u0440\\u0430\\u0442\\u0443\\u0440\\u0430 \\u043E\\u0445\\u043B\\u0430\\u0436\\u0434\\u0430\\u044E\\u0449\\u0435\\u0439 \\u0436\\u0438\\u0434\\u043A\\u043E\\u0441\\u0442\\u0438 (\\xB0C):\"}),isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:mds.coolant_temperature,onChange:e=>setMds({...mds,coolant_temperature:e.target.value})}):mds.coolant_temperature]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0414\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043C\\u0430\\u0441\\u043B\\u0430 (\\u0431\\u0430\\u0440):\"}),isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:mds.oil_pressure,onChange:e=>setMds({...mds,oil_pressure:e.target.value})}):mds.oil_pressure]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"button-group\",children:isEditing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleSave,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setIsEditing(false),children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]}):/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>setIsEditing(true),children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"})})]});};export default MeasuringDeviceSystem;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","MeasuringDeviceSystem","navigate","id","mds","setMds","isEditing","setIsEditing","fetchMDS","response","get","withCredentials","credentials","data","err","console","log","alert","handleSave","put","className","children","type","value","model","onChange","e","target","fuel_quantity","coolant_temperature","oil_pressure","onClick"],"sources":["/home/igor/Documents/react4/src/pages/MeasuringSystem.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { useParams, useNavigate } from \"react-router-dom\"\nimport axios from \"axios\"\nimport './MeasuringSystem.css'\n\nconst MeasuringDeviceSystem = () => {\n    const navigate = useNavigate()\n    const { id } = useParams()\n    const [mds, setMds] = useState('')\n    const [isEditing, setIsEditing] = useState(false)\n\n    useEffect(() => {\n        const fetchMDS = async () => {\n            try {\n                const response = await axios.get(`http://217.71.129.139:5735/measuring_device/${id}`, { withCredentials: true, credentials: 'include' })\n                setMds(response.data)\n            } catch (err) {\n                console.log(err)\n                alert('Ошибка при получении данных')\n                navigate('/profile')\n            }\n        };\n        if (id) {\n            fetchMDS()\n        }\n    }, [id])\n\n    const handleSave = async () => {\n        try {\n            await axios.put(`http://217.71.129.139:5735/measuring_device/${id}`, mds, { withCredentials: true, credentials: 'include' })\n            setIsEditing(false)\n        } catch (err) {\n            console.log(err)\n            alert('Ошибка при сохранении')\n        }\n    }\n\n    return (\n        <div className=\"mds-container\">\n            <h2>Система измерительных приборов</h2>\n            <div className=\"mds-data\">\n                <div className=\"data-item\">\n                    <strong>Модель:</strong>\n                    {isEditing ? (\n                        <input \n                            type=\"text\" \n                            value={mds.model} \n                            onChange={(e) => setMds({ ...mds, model: e.target.value })}\n                        />\n                    ) : mds.model}\n                </div>\n                <div className=\"data-item\">\n                    <strong>Количество топлива (л):</strong>\n                    {isEditing ? (\n                        <input \n                            type=\"number\" \n                            value={mds.fuel_quantity} \n                            onChange={(e) => setMds({ ...mds, fuel_quantity: e.target.value })}\n                        />\n                    ) : mds.fuel_quantity}\n                </div>\n                <div className=\"data-item\">\n                    <strong>Температура охлаждающей жидкости (°C):</strong>\n                    {isEditing ? (\n                        <input \n                            type=\"number\" \n                            value={mds.coolant_temperature} \n                            onChange={(e) => setMds({ ...mds, coolant_temperature: e.target.value })}\n                        />\n                    ) : mds.coolant_temperature}\n                </div>\n                <div className=\"data-item\">\n                    <strong>Давление масла (бар):</strong>\n                    {isEditing ? (\n                        <input \n                            type=\"number\" \n                            value={mds.oil_pressure} \n                            onChange={(e) => setMds({ ...mds, oil_pressure: e.target.value })}\n                        />\n                    ) : mds.oil_pressure}\n                </div>\n            </div>\n            <div className=\"button-group\">\n                {isEditing ? (\n                    <>\n                        <button className=\"btn btn-primary\" onClick={handleSave}>\n                            Сохранить\n                        </button>\n                        <button className=\"btn btn-secondary\" onClick={() => setIsEditing(false)}>\n                            Отмена\n                        </button>\n                    </>\n                ) : (\n                    <button className=\"btn btn-primary\" onClick={() => setIsEditing(true)}>\n                        Редактировать\n                    </button>\n                )}\n            </div>\n        </div>\n    );\n};\n\nexport default MeasuringDeviceSystem"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}