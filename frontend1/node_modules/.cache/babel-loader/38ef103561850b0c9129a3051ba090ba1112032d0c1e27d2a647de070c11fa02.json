{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Link,useParams,useNavigate}from\"react-router-dom\";import axios from\"axios\";import'./RouteComputer.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const RouteComputer=()=>{const navigate=useNavigate();const{id}=useParams();const[rc,setRc]=useState('');const[isEditing,setIsEditing]=useState(false);useEffect(()=>{const fetchRC=async()=>{try{const response=await axios.get(`http://217.71.129.139:5735/route_computer/${id}`,{withCredentials:true,credentials:'include'});setRc(response.data);}catch(err){console.log(err);alert('Ошибка при получении данных');navigate('/profile');}};if(id){fetchRC();}},id);const handleSave=async()=>{try{await axios.put(`http://217.71.129.139:5735/route_computer/${id}`,rc,{withCredentials:true,credentials:'include'});setIsEditing(false);}catch(err){console.log(err);alert('Ошибка при сохранении');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"rc-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041C\\u0430\\u0440\\u0448\\u0440\\u0443\\u0442\\u043D\\u044B\\u0439 \\u043A\\u043E\\u043C\\u043F\\u044C\\u044E\\u0442\\u0435\\u0440\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"rc-data\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041C\\u043E\\u0434\\u0435\\u043B\\u044C:\"}),isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:rc.model,onChange:e=>setRc({...rc,model:e.target.value})}):rc.model]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0420\\u0430\\u0441\\u0445\\u043E\\u0434 \\u0442\\u043E\\u043F\\u043B\\u0438\\u0432\\u0430:\"}),isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:rc.fuel_consumption,onChange:e=>setRc({...rc,fuel_consumption:e.target.value})}):rc.fuel_consumption]}),/*#__PURE__*/_jsxs(\"div\",{className:\"data-item\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u041F\\u0440\\u043E\\u0431\\u0435\\u0433:\"}),isEditing?/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:rc.mileage,onChange:e=>setRc({...rc,mileage:e.target.value})}):rc.mileage]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[isEditing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"first-btn\",onClick:handleSave,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"second-btn\",onClick:()=>setIsEditing(false),children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]}):/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>setIsEditing(true),children:\"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:\"back-button\",children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"})]})]});};export default RouteComputer;","map":{"version":3,"names":["React","useState","useEffect","Link","useParams","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RouteComputer","navigate","id","rc","setRc","isEditing","setIsEditing","fetchRC","response","get","withCredentials","credentials","data","err","console","log","alert","handleSave","put","className","children","type","value","model","onChange","e","target","fuel_consumption","mileage","onClick","to"],"sources":["/home/igor/Documents/react4/src/pages/RouteComputer.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Link, useParams, useNavigate } from \"react-router-dom\"\nimport axios from \"axios\"\nimport './RouteComputer.css'\n\nconst RouteComputer = () => {\n    const navigate = useNavigate()\n    const { id } = useParams()\n    const [rc, setRc] = useState('')\n    const [isEditing, setIsEditing] = useState(false)\n\n    useEffect(() => {\n        const fetchRC = async () => {\n        try {\n            const response = await axios.get(`http://217.71.129.139:5735/route_computer/${id}`, { withCredentials: true, credentials: 'include' });\n            setRc(response.data)\n        } catch (err) {\n            console.log(err)\n            alert('Ошибка при получении данных')\n            navigate('/profile')\n        }};\n        if (id) {\n            fetchRC()\n        }\n        }, id)\n\n    const handleSave = async () => {\n    try {\n        await axios.put(`http://217.71.129.139:5735/route_computer/${id}`, rc, { withCredentials: true, credentials: 'include' })\n        setIsEditing(false)\n    } catch (err) {\n        console.log(err)\n        alert('Ошибка при сохранении')\n    }}\n\n    return (\n        <div className=\"rc-container\">\n            <h2>Маршрутный компьютер</h2>\n            <div className=\"rc-data\">\n                <div className=\"data-item\">\n                    <strong>Модель:</strong>\n                    {isEditing ? (\n                    <input type=\"text\" value={rc.model} onChange={(e) => setRc({ ...rc, model: e.target.value })}/>\n                    ) : rc.model}\n                </div>\n                <div className=\"data-item\">\n                    <strong>Расход топлива:</strong>\n                    {isEditing ? (\n                    <input type=\"number\" value={rc.fuel_consumption} onChange={(e) => setRc({ ...rc, fuel_consumption: e.target.value })}/>\n                    ) : rc.fuel_consumption}\n                </div>\n                <div className=\"data-item\">\n                    <strong>Пробег:</strong>\n                    {isEditing ? (\n                    <input type=\"number\" value={rc.mileage} onChange={(e) => setRc({ ...rc, mileage: e.target.value })}/>\n                    ) : rc.mileage}\n                </div>\n            </div>\n            <div className=\"buttons\">\n            {isEditing ? (\n            <>\n            <button className=\"first-btn\" onClick={handleSave}>Сохранить</button>\n            <button className=\"second-btn\" onClick={() => setIsEditing(false)}>Отмена</button>\n            </>\n            ) : (\n            <button className=\"btn\" onClick={() => setIsEditing(true)}>Редактировать</button>\n            )}\n            <Link to=\"/profile\" className=\"back-button\">\n            Назад\n            </Link>\n        </div>\n    </div>\n);};\n\nexport default RouteComputer;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}