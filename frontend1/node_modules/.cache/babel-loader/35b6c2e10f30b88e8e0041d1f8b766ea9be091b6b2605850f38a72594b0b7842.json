{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import SignInRegister from\"./SignUp\";import{jsx as _jsx}from\"react/jsx-runtime\";const Login=()=>{const[user,setUser]=useState(null);const navigate=useNavigate();const register=async(username,email,password)=>{try{const response=await axios.post('http://217.71.129.139:5675/register',{username,email,password},{withCredentials:true,credentials:'include'});const data=await response();signIn(username,password);navigate('/profile');}catch(err){console.log(err);alert('Ошибка при регистрации');}};const signIn=async(username,password)=>{try{const response=await axios.post('http://217.71.129.139:5675/signin',{username,password},{withCredentials:true,credentials:'include'});setUser(response.data);localStorage.clear('user');localStorage.setItem('user',JSON.stringify(response.data));}catch(err){console.log(err);alert('Ошибка при входе');}};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:user===null?/*#__PURE__*/_jsx(SignInRegister,{signIn:signIn,register:register}):navigate('/profile')});};export default Login;","map":{"version":3,"names":["React","useState","useNavigate","axios","SignInRegister","jsx","_jsx","Login","user","setUser","navigate","register","username","email","password","response","post","withCredentials","credentials","data","signIn","err","console","log","alert","localStorage","clear","setItem","JSON","stringify","className","children"],"sources":["/home/igor/Documents/react4/src/pages/Login.js"],"sourcesContent":["import React, { useState } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport axios from \"axios\"\nimport SignInRegister from \"./SignUp\"\n\nconst Login = () => {\n  const [user, setUser] = useState(null)\n  const navigate = useNavigate()\n\n  const register = async (username, email, password) => {\n    try {\n      const response = await axios.post('http://217.71.129.139:5675/register', {username, email, password}, {withCredentials: true, credentials: 'include'})\n      const data = await response()     \n      signIn(username, password)\n      navigate('/profile')\n    } catch (err) {\n        console.log(err)\n        alert('Ошибка при регистрации')\n    }\n  }\n  \n  const signIn = async (username, password) => {\n    try {\n      const response = await axios.post('http://217.71.129.139:5675/signin', {username, password}, {withCredentials: true, credentials: 'include'})\n      setUser(response.data)\n      localStorage.clear('user')\n      localStorage.setItem('user', JSON.stringify(response.data))\n    } catch (err) {\n        console.log(err)\n        alert('Ошибка при входе')\n    }\n  }\n  \n  return (\n    <div className=\"App\">\n      {\n        user === null ?\n        <SignInRegister\n          signIn={signIn}\n          register={register}\n        />\n        : navigate('/profile')\n      }\n    </div>\n  )\n}\n\nexport default Login"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,cAAc,KAAM,UAAU,QAAAC,GAAA,IAAAC,IAAA,yBAErC,KAAM,CAAAC,KAAK,CAAGA,CAAA,GAAM,CAClB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGR,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAAAS,QAAQ,CAAGR,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAS,QAAQ,CAAG,KAAAA,CAAOC,QAAQ,CAAEC,KAAK,CAAEC,QAAQ,GAAK,CACpD,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAZ,KAAK,CAACa,IAAI,CAAC,qCAAqC,CAAE,CAACJ,QAAQ,CAAEC,KAAK,CAAEC,QAAQ,CAAC,CAAE,CAACG,eAAe,CAAE,IAAI,CAAEC,WAAW,CAAE,SAAS,CAAC,CAAC,CACtJ,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAJ,QAAQ,CAAC,CAAC,CAC7BK,MAAM,CAACR,QAAQ,CAAEE,QAAQ,CAAC,CAC1BJ,QAAQ,CAAC,UAAU,CAAC,CACtB,CAAE,MAAOW,GAAG,CAAE,CACVC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChBG,KAAK,CAAC,wBAAwB,CAAC,CACnC,CACF,CAAC,CAED,KAAM,CAAAJ,MAAM,CAAG,KAAAA,CAAOR,QAAQ,CAAEE,QAAQ,GAAK,CAC3C,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAZ,KAAK,CAACa,IAAI,CAAC,mCAAmC,CAAE,CAACJ,QAAQ,CAAEE,QAAQ,CAAC,CAAE,CAACG,eAAe,CAAE,IAAI,CAAEC,WAAW,CAAE,SAAS,CAAC,CAAC,CAC7IT,OAAO,CAACM,QAAQ,CAACI,IAAI,CAAC,CACtBM,YAAY,CAACC,KAAK,CAAC,MAAM,CAAC,CAC1BD,YAAY,CAACE,OAAO,CAAC,MAAM,CAAEC,IAAI,CAACC,SAAS,CAACd,QAAQ,CAACI,IAAI,CAAC,CAAC,CAC7D,CAAE,MAAOE,GAAG,CAAE,CACVC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChBG,KAAK,CAAC,kBAAkB,CAAC,CAC7B,CACF,CAAC,CAED,mBACElB,IAAA,QAAKwB,SAAS,CAAC,KAAK,CAAAC,QAAA,CAEhBvB,IAAI,GAAK,IAAI,cACbF,IAAA,CAACF,cAAc,EACbgB,MAAM,CAAEA,MAAO,CACfT,QAAQ,CAAEA,QAAS,CACpB,CAAC,CACAD,QAAQ,CAAC,UAAU,CAAC,CAErB,CAAC,CAEV,CAAC,CAED,cAAe,CAAAH,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}